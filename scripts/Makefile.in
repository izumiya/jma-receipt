INSTALL = @INSTALL@
INSTALL_PROGRAM = @INSTALL_PROGRAM@
INSTALL_SCRIPT = @INSTALL_SCRIPT@
INSTALL_DATA = @INSTALL_DATA@

prefix = @prefix@
exec_prefix= @exec_prefix@
sysconfdir= @sysconfdir@
scriptsdir = ${exec_prefix}/scripts

noinst_shell_sources = \
		sample.sh.in 


shell_sources = \
		allways/ORCBQ01.sh.in \
		allways/master_upgrade.sh.in \
		allways/orcbsd01.sh.in \
		allways/orcbse01.sh.in \
		allways/orcbsf01.sh.in \
		allways/orcbsf02.sh.in \
		allways/orcbsf03.sh.in \
		allways/orhcml09.sh.in \
		allways/print.sh.in \
		allways/site-upgrade.sh.in \
		allways/tensu.sh.in \
		daily/HCALL.sh.in \
		daily/execoprg.sh.in \
		daily/HC01.sh.in \
		daily/HCALL2.sh.in \
		monthly/recept1.sh.in \
		monthly/recept2.sh.in \
		monthly/recept3.sh.in \
		monthly/recept4.sh.in \
		monthly/recept5.sh.in \
		monthly/recept6.sh.in \
		monthly/recept7.sh.in \
		monthly/recept8.sh.in \
		monthly/sokatsu.sh.in 

ruby_sources = \
		daily/print-data.rb.in \
		daily/print_parent2.rb.in \
		daily/print_parent.rb.in

shell_scripts = $(shell_sources:.sh.in=.sh)
noinst_shell_scripts = $(noinst_shell_sources:.sh.in=.sh)

ruby_scripts = $(ruby_surces:.rb.in=.rb)

.SUFFIXES: .sh.in .sh .rb.in .rb

.sh.in.sh: 
	sed -e 's,\@sysconfdir\@,$(sysconfdir),g' \
	$< > $@

all:   \
	$(noinst_shell_scripts) \
#	$(shell_scripts)

clean: 
	-rm $(noinst_shell_scripts)
#	-rm $(shell_scripts)

distclean: clean
	-rm -f Makefile

install: all
	$(INSTALL) -d $(scriptsdir)
	$(INSTALL) -d $(scriptsdir)/allways
	$(INSTALL) -d $(scriptsdir)/daily
	$(INSTALL) -d $(scriptsdir)/monthly
	for file in $(shell_scripts) $(ruby_scripts);do \
	  dir=`echo "$$file" | sed -e 's,/[^/]*$$,,'`; \
	  $(INSTALL) $$file $(scriptsdir)/$$dir; \
	done
