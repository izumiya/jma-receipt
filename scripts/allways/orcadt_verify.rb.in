Encoding.default_external = "euc-jisx0213"
"
    opts.on_head("options:")
    option_spec.each{|long, desc, key|
      opts.on("", long, desc){|arg|
        options[key] = arg
      }
    }
    opts.on("", "--no-verify", "don't verify") {
      options["do_verify"] = false
    }
    opts.on_tail('--help', 'show this message'){
      raise "help specified"
    }
  }
  begin
    parser.parse!(argv)
  rescue RuntimeError => ex
    puts parser;
    exit 1;
  end
  return options
end

if $0 == __FILE__
  opts = parse_option($0, ARGV)
  unless opts["dir"]
    puts "specify --dir"
    exit 1
  end
  begin
    ARGV.each{|url|
      OrcaDT::Verifier.verify(url, opts)
    }
  rescue Exception => ex
    puts "[ERROR] #{ex.message}"
    puts ex.backtrace
    exit 1
  end
  exit 0
end
