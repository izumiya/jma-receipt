Encoding.default_external = "euc-jisx0213"
/, "").to_s

          if File.exist?(PATCHDIR+file)
            if md5sum == Digest::MD5.hexdigest(File.open(PATCHDIR+file).read).to_s
              next
            end
            File.delete(PATCHDIR+file)
          end

          unless caverify(PRGPATH+file+".p7m", @options)
            return false
          end
        end
      }
      plist.close
      return true
    end

    def download()
      if dl_patchkanri()
        dl_patchfile()
      end
    end

    def self.main(argv)
      mnt = self.new
      exit!(mnt.download ? 0 : 1)
    end
  end
end

PACKAGEFILE = ENV['PACKAGEFILE']
PATCHDIR = ENV['PATCHDIR'] + "/"
PRGPATH = ENV['PRGPATH'] + "/"
CACERTFILE = ENV['CACERTFILE']
PATCHLIST = ENV['PATCHLIST']
OrcaMNT::Command.main(ARGV) if $0 == __FILE__
