#!/bin/sh

if test -z "$JMARECEIPT_ENV" ; then
    JMARECEIPT_ENV="@jma-receipt-env@"
fi
if ! test -f "$JMARECEIPT_ENV"; then
    exit 0
fi

. $JMARECEIPT_ENV

#-------------------------------------------#
#    医療請求書出力処理
#        CPCOMMONSHELL1.INC($3-$6)  
#        $1 JOBID 
#        $2 SHELLID
#        $3 SRYYM TERID SYSYMD
#        $4 実行プログラム
#           0:ORCR0101
#           1:ORCR0102 
#        $5 SYOKBN         （ＯＲＣＲ０１０２のときのみ使用）
#           1:一括 2:個別
#        $6 エラーファイル名 
#        $7 印刷用条件パラメタ 
#        $8 印刷開始 
#        $8 端末ＩＤX(32)  （ＯＲＣＲ０１０２のとき）
#        $9 印刷終了
#        $10 帳票識別番号
#        $11 社保プリンタ名
#        $12 国保プリンタ名
#        $13-$23 印刷ＤＢ用固定引数
#        $24 続紙印刷区分
#        $25 社保（続紙）プリンタ名
#        $26 国保（続紙）プリンタ名
#-------------------------------------------#
##      エラーファイル削除
	echo $#
	echo "echo " $6
        if  [ -e $6 ]; then
            rm  $6
        fi

        rennum=0

        
        if [ $4 =  0 ]; then
	       $DBSTUB -dir "$LDDEFDIR"/directory -bd orcabt ORCR0101 -parameter ${24},$1,$2,$3,$7,$8,$9,${10},
        else 
           rennum=$(expr $rennum + 1) 
	       $DBSTUB -dir "$LDDEFDIR"/directory -bd orcabt ORCR0102 -parameter $1,$2,$3,$7,$8,$5,${11},${12},${13},${14},${15},$rennum,${17},${18},${19},${20},${21},${22},${23},${25},${26}
           if  [ -e $6 ]; then
               exit 
           else
	       $DBSTUB -dir "$LDDEFDIR"/directory -bd orcabt ORCBJOB -parameter JBE$1$2
           fi
        fi

        exit
