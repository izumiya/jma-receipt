INSTALL = @INSTALL@
INSTALL_DATA = @INSTALL_DATA@

prefix = @prefix@
exec_prefix= @exec_prefix@
ORCA_DIR = ${exec_prefix}
lddefdir = ${ORCA_DIR}/lddef
libdir = @libdir@

CPP = @CPP@
# dummy flags
LDFILEFLAGS = -x c

LDFILE_sources = \
	orca00.ld.in \
	orca01.ld.in \
	orca02.ld.in \
	orca11.ld.in \
	orca12.ld.in \
	orca13.ld.in \
	orca14.ld.in \
	orca18.ld.in \
	orca19.ld.in \
	orca21.ld.in \
	orca22.ld.in \
	orca23.ld.in \
	orca24.ld.in \
	orca31.ld.in \
	orca32.ld.in \
	orca33.ld.in \
	orca34.ld.in \
	orca36.ld.in \
	orca41.ld.in \
	orca42.ld.in \
	orca43.ld.in \
	orca44.ld.in \
	orca51.ld.in \
	orca52.ld.in \
	orca71.ld.in \
	orca82.ld.in \
	orca101.ld.in \
	orca102.ld.in \
	orca103.ld.in \
	orca104.ld.in \
	orca105.ld.in \
	orca106.ld.in \
	orca107.ld.in

BDFILE_sources = \
	orcabt.bd.in \
	recept.bd.in 

LDFILE = $(LDFILE_sources:.ld.in=.ld)
BDFILE = $(BDFILE_sources:.bd.in=.bd)

DIRECTORYFILE_in = directory.in
DIRECTORYFILE = directory

ORCAHOMEFILE_in = orcahome.inc.in
ORCAHOMEFILE = orcahome.inc

ORCADBFILE= orcadb.inc

INSTALL_LDFILE = $(LDFILE) $(BDFILE) $(DIRECTORYFILE) \
                 $(ORCAHOMEFILE) $(ORCADBFILE)

.SUFFIXES: .ld.in .bd.in .ld .bd 

.ld.in.ld .bd.in.bd:
	$(CPP) $(LDFILEFLAGS) $< > $@

all: $(LDFILE) $(BDFILE) $(DIRECTORYFILE)

$(LDFILE) $(BDFILE):  orcadb.inc orcahome.inc

filecheck:

directory:
	sed -e 's,\@ORCA_DIR\@,$(ORCA_DIR),g' \
	$(DIRECTORYFILE_in) > $(DIRECTORYFILE) 

orcahome.inc:
	sed -e 's,\@libdir\@,$(libdir),g' \
	$(ORCAHOMEFILE_in) > $(ORCAHOMEFILE)

clean: 
	-rm $(LDFILE) $(BDFILE)
	-rm directory orcahome.inc

distclean: clean
	-rm -f Makefile

install: all
	$(INSTALL) -d $(lddefdir)
	$(INSTALL_DATA) $(INSTALL_LDFILE) $(lddefdir)
